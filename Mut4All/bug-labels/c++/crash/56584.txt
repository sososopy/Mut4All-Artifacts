Issue Title:
Clang crashes by the variant construction

Source Code & Bug Trace:
PLEASE submit a bug report to https://github.com/llvm/llvm-project/issues/ and include the crash backtrace, preprocessed source, and associated run script.
Stack dump:
0.	Program arguments: /usr/lib/llvm-15/bin/clang -cc1 -triple x86_64-pc-linux-gnu -emit-obj -mrelax-all --mrelax-relocations -disable-free -clear-ast-before-backend -disable-llvm-verifier -discard-value-names -main-file-name ships-30e500.cpp -mrelocation-model pic -pic-level 2 -pic-is-pie -mframe-pointer=all -fmath-errno -ffp-contract=on -fno-rounding-math -mconstructor-aliases -funwind-tables=2 -target-cpu x86-64 -tune-cpu generic -mllvm -treat-scalable-fixed-error-as-warning -debugger-tuning=gdb -fcoverage-compilation-dir=/tmp -resource-dir /usr/lib/llvm-15/lib/clang/15.0.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/11/../../../../include/x86_64-linux-gnu/c++/11 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/backward -internal-isystem /usr/lib/llvm-15/lib/clang/15.0.0/include -internal-isystem /usr/local/include -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/11/../../../../x86_64-linux-gnu/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -std=c++20 -fdeprecated-macro -fdebug-compilation-dir=/tmp -ferror-limit 19 -fgnuc-version=4.2.1 -fno-implicit-modules -fcxx-exceptions -fexceptions -faddrsig -D__GCC_HAVE_DWARF2_CFI_ASM=1 -o /tmp/ships-30e500-f325f9.o -x c++ ships-30e500.cpp
1.	/home/evsergey/mooo1/src/game/battle/ships.cpp:550:30: current parser token ';'
2.	/home/evsergey/mooo1/src/game/battle/ships.cpp:6:1: parsing namespace 'mooo1'
3.	/home/evsergey/mooo1/src/game/battle/ships.cpp:504:1: parsing function body 'mooo1::game::battle::ship::get_attack'
4.	/home/evsergey/mooo1/src/game/battle/ships.cpp:504:1: in compound statement ('{}')
5.	/home/evsergey/mooo1/src/game/battle/ships.cpp:531:13: in compound statement ('{}')
6.	/usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/variant:1338:26: instantiating variable initializer 'std::variant<mooo1::game::battle::without_attack, mooo1::game::battle::special_attack, mooo1::game::battle::weapon_attack, mooo1::game::battle::missile_attack>::__accepted_index<mooo1::game::battle::weapon_attack &&>'
7.	/usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/variant:759:12: instantiating class definition 'std::__detail::__variant::_Build_FUNs<mooo1::game::battle::weapon_attack &&, std::variant<mooo1::game::battle::without_attack, mooo1::game::battle::special_attack, mooo1::game::battle::weapon_attack, mooo1::game::battle::missile_attack>, std::integer_sequence<unsigned long, 0, 1, 2, 3>>'
  #0 0x00007fe21ecdde21 llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) (/usr/lib/llvm-15/bin/../lib/libLLVM-15.so.1+0xefbe21)
  #1 0x00007fe21ecdbb7e llvm::sys::RunSignalHandlers() (/usr/lib/llvm-15/bin/../lib/libLLVM-15.so.1+0xef9b7e)
  #2 0x00007fe21ecde34b (/usr/lib/llvm-15/bin/../lib/libLLVM-15.so.1+0xefc34b)
  #3 0x00007fe228767420 __restore_rt (/lib/x86_64-linux-gnu/libpthread.so.0+0x14420)
  #4 0x00007fe225bdd0f3 clang::Stmt::getSourceRange() const (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xeb60f3)
  #5 0x00007fe2263064bf (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15df4bf)
  #6 0x00007fe2262fdd6b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d6d6b)
  #7 0x00007fe2262fd8db (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d68db)
  #8 0x00007fe2262eaacd (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15c3acd)
  #9 0x00007fe2262fad43 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d3d43)
 #10 0x00007fe2262f7672 clang::InitializationSequence::Diagnose(clang::Sema&, clang::InitializedEntity const&, clang::InitializationKind const&, llvm::ArrayRef<clang::Expr*>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d0672)
 #11 0x00007fe2262f39c3 clang::InitializationSequence::Perform(clang::Sema&, clang::InitializedEntity const&, clang::InitializationKind const&, llvm::MutableArrayRef<clang::Expr*>, clang::QualType*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15cc9c3)
 #12 0x00007fe226301583 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15da583)
 #13 0x00007fe2262ffab5 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d8ab5)
 #14 0x00007fe2262fe774 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d7774)
 #15 0x00007fe2262ea7c7 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15c37c7)
 #16 0x00007fe2262fad43 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d3d43)
 #17 0x00007fe2262f7672 clang::InitializationSequence::Diagnose(clang::Sema&, clang::InitializedEntity const&, clang::InitializationKind const&, llvm::ArrayRef<clang::Expr*>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15d0672)
 #18 0x00007fe2262f39c3 clang::InitializationSequence::Perform(clang::Sema&, clang::InitializedEntity const&, clang::InitializationKind const&, llvm::MutableArrayRef<clang::Expr*>, clang::QualType*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15cc9c3)
 #19 0x00007fe226247d7c clang::Sema::BuildCXXTypeConstructExpr(clang::TypeSourceInfo*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1520d7c)
 #20 0x00007fe226584b15 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x185db15)
 #21 0x00007fe226596b36 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x186fb36)
 #22 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #23 0x00007fe22658ec3b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1867c3b)
 #24 0x00007fe22658d6f0 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18666f0)
 #25 0x00007fe22659a926 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1873926)
 #26 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #27 0x00007fe22658ec3b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1867c3b)
 #28 0x00007fe22657db10 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1856b10)
 #29 0x00007fe226577abf clang::Sema::SubstTemplateArguments(llvm::ArrayRef<clang::TemplateArgumentLoc>, clang::MultiLevelTemplateArgumentList const&, clang::TemplateArgumentListInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1850abf)
 #30 0x00007fe22656d202 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1846202)
 #31 0x00007fe22656c9f2 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18459f2)
 #32 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #33 0x00007fe2265188b3 clang::Sema::DeduceTemplateArguments(clang::ClassTemplatePartialSpecializationDecl*, clang::TemplateArgumentList const&, clang::sema::TemplateDeductionInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17f18b3)
 #34 0x00007fe22657c2d0 clang::Sema::InstantiateClassTemplateSpecialization(clang::SourceLocation, clang::ClassTemplateSpecializationDecl*, clang::TemplateSpecializationKind, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18552d0)
 #35 0x00007fe22662889e (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x190189e)
 #36 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #37 0x00007fe22661b0ca clang::Sema::RequireCompleteTypeImpl(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f40ca)
 #38 0x00007fe22661a892 clang::Sema::RequireCompleteType(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f3892)
 #39 0x00007fe2260bdaee clang::Sema::CheckBaseSpecifier(clang::CXXRecordDecl*, clang::SourceRange, bool, clang::AccessSpecifier, clang::TypeSourceInfo*, clang::SourceLocation) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1396aee)
 #40 0x00007fe22657a066 clang::Sema::SubstBaseSpecifiers(clang::CXXRecordDecl*, clang::CXXRecordDecl*, clang::MultiLevelTemplateArgumentList const&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1853066)
 #41 0x00007fe22657a781 clang::Sema::InstantiateClass(clang::SourceLocation, clang::CXXRecordDecl*, clang::CXXRecordDecl*, clang::MultiLevelTemplateArgumentList const&, clang::TemplateSpecializationKind, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1853781)
 #42 0x00007fe22657c84d clang::Sema::InstantiateClassTemplateSpecialization(clang::SourceLocation, clang::ClassTemplateSpecializationDecl*, clang::TemplateSpecializationKind, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x185584d)
 #43 0x00007fe22662889e (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x190189e)
 #44 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #45 0x00007fe22661b0ca clang::Sema::RequireCompleteTypeImpl(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f40ca)
 #46 0x00007fe22661a892 clang::Sema::RequireCompleteType(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f3892)
 #47 0x00007fe225f3db84 clang::Sema::RequireCompleteDeclContext(clang::CXXScopeSpec&, clang::DeclContext*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1216b84)
 #48 0x00007fe22616df45 clang::Sema::BuildQualifiedDeclarationNameExpr(clang::CXXScopeSpec&, clang::DeclarationNameInfo const&, bool, clang::Scope const*, clang::TypeSourceInfo**) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1446f45)
 #49 0x00007fe22658fc45 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1868c45)
 #50 0x00007fe226584d35 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x185dd35)
 #51 0x00007fe226596b36 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x186fb36)
 #52 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #53 0x00007fe22657642b clang::Sema::SubstType(clang::QualType, clang::MultiLevelTemplateArgumentList const&, clang::SourceLocation, clang::DeclarationName) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184f42b)
 #54 0x00007fe226491dfd clang::Sema::CheckTemplateIdType(clang::TemplateName, clang::SourceLocation, clang::TemplateArgumentListInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x176adfd)
 #55 0x00007fe22658de90 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1866e90)
 #56 0x00007fe22659a926 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1873926)
 #57 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #58 0x00007fe22658ec3b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1867c3b)
 #59 0x00007fe22658d6f0 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18666f0)
 #60 0x00007fe22659a926 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1873926)
 #61 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #62 0x00007fe22658ec3b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1867c3b)
 #63 0x00007fe22657db10 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1856b10)
 #64 0x00007fe226577abf clang::Sema::SubstTemplateArguments(llvm::ArrayRef<clang::TemplateArgumentLoc>, clang::MultiLevelTemplateArgumentList const&, clang::TemplateArgumentListInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1850abf)
 #65 0x00007fe22656d202 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1846202)
 #66 0x00007fe22656c9f2 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18459f2)
 #67 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #68 0x00007fe2265188b3 clang::Sema::DeduceTemplateArguments(clang::ClassTemplatePartialSpecializationDecl*, clang::TemplateArgumentList const&, clang::sema::TemplateDeductionInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17f18b3)
 #69 0x00007fe22657c2d0 clang::Sema::InstantiateClassTemplateSpecialization(clang::SourceLocation, clang::ClassTemplateSpecializationDecl*, clang::TemplateSpecializationKind, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18552d0)
 #70 0x00007fe22662889e (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x190189e)
 #71 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #72 0x00007fe22661b0ca clang::Sema::RequireCompleteTypeImpl(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f40ca)
 #73 0x00007fe22661a892 clang::Sema::RequireCompleteType(clang::SourceLocation, clang::QualType, clang::Sema::CompleteTypeKind, clang::Sema::TypeDiagnoser&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18f3892)
 #74 0x00007fe225f3db84 clang::Sema::RequireCompleteDeclContext(clang::CXXScopeSpec&, clang::DeclContext*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1216b84)
 #75 0x00007fe22616df45 clang::Sema::BuildQualifiedDeclarationNameExpr(clang::CXXScopeSpec&, clang::DeclarationNameInfo const&, bool, clang::Scope const*, clang::TypeSourceInfo**) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1446f45)
 #76 0x00007fe22658fc45 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1868c45)
 #77 0x00007fe22657e62b (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x185762b)
 #78 0x00007fe22657bca7 clang::Sema::SubstInitializer(clang::Expr*, clang::MultiLevelTemplateArgumentList const&, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1854ca7)
 #79 0x00007fe2265bad23 clang::Sema::InstantiateVariableInitializer(clang::VarDecl*, clang::VarDecl*, clang::MultiLevelTemplateArgumentList const&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1893d23)
 #80 0x00007fe2265bfe8d clang::Sema::InstantiateVariableDefinition(clang::SourceLocation, clang::VarDecl*, bool, bool, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1898e8d)
 #81 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
 #82 0x00007fe2261a3529 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x147c529)
 #83 0x00007fe22616b998 clang::Sema::BuildDeclRefExpr(clang::ValueDecl*, clang::QualType, clang::ExprValueKind, clang::DeclarationNameInfo const&, clang::NestedNameSpecifierLoc, clang::NamedDecl*, clang::SourceLocation, clang::TemplateArgumentListInfo const*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1444998)
 #84 0x00007fe22616b867 clang::Sema::BuildDeclRefExpr(clang::ValueDecl*, clang::QualType, clang::ExprValueKind, clang::DeclarationNameInfo const&, clang::CXXScopeSpec const*, clang::NamedDecl*, clang::SourceLocation, clang::TemplateArgumentListInfo const*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1444867)
 #85 0x00007fe22616f9f3 clang::Sema::BuildDeclarationNameExpr(clang::CXXScopeSpec const&, clang::DeclarationNameInfo const&, clang::NamedDecl*, clang::NamedDecl*, clang::TemplateArgumentListInfo const*, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x14489f3)
 #86 0x00007fe2264998ed clang::Sema::BuildTemplateIdExpr(clang::CXXScopeSpec const&, clang::SourceLocation, clang::LookupResult&, bool, clang::TemplateArgumentListInfo const*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17728ed)
 #87 0x00007fe226589f07 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1862f07)
 #88 0x00007fe22658ebd3 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1867bd3)
 #89 0x00007fe22658d6f0 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x18666f0)
 #90 0x00007fe22659a926 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1873926)
 #91 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #92 0x00007fe22657642b clang::Sema::SubstType(clang::QualType, clang::MultiLevelTemplateArgumentList const&, clang::SourceLocation, clang::DeclarationName) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184f42b)
 #93 0x00007fe226491dfd clang::Sema::CheckTemplateIdType(clang::TemplateName, clang::SourceLocation, clang::TemplateArgumentListInfo&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x176adfd)
 #94 0x00007fe22658de90 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1866e90)
 #95 0x00007fe22659a926 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1873926)
 #96 0x00007fe226575b29 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184eb29)
 #97 0x00007fe2265757f4 clang::Sema::SubstType(clang::TypeSourceInfo*, clang::MultiLevelTemplateArgumentList const&, clang::SourceLocation, clang::DeclarationName, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x184e7f4)
 #98 0x00007fe22649b2fb (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17742fb)
 #99 0x00007fe22649ad61 clang::Sema::SubstDefaultTemplateArgumentIfAvailable(clang::TemplateDecl*, clang::SourceLocation, clang::SourceLocation, clang::Decl*, llvm::SmallVectorImpl<clang::TemplateArgument>&, bool&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1773d61)
#100 0x00007fe22651a47d clang::Sema::FinishTemplateArgumentDeduction(clang::FunctionTemplateDecl*, llvm::SmallVectorImpl<clang::DeducedTemplateArgument>&, unsigned int, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, llvm::SmallVectorImpl<clang::Sema::OriginalCallArg> const*, bool, llvm::function_ref<bool ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17f347d)
#101 0x00007fe226570217 (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1849217)
#102 0x00007fe225ec2fbc clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x119bfbc)
#103 0x00007fe22651c0bd clang::Sema::DeduceTemplateArguments(clang::FunctionTemplateDecl*, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, bool, llvm::function_ref<bool (llvm::ArrayRef<clang::QualType>)>) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x17f50bd)
#104 0x00007fe226412b73 clang::Sema::AddTemplateOverloadCandidate(clang::FunctionTemplateDecl*, clang::DeclAccessPair, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::OverloadCandidateSet&, bool, bool, bool, clang::CallExpr::ADLCallKind, clang::OverloadCandidateParamOrder) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x16ebb73)
#105 0x00007fe2262f14ab (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15ca4ab)
#106 0x00007fe2262ee77e clang::InitializationSequence::InitializeFrom(clang::Sema&, clang::InitializedEntity const&, clang::InitializationKind const&, llvm::MutableArrayRef<clang::Expr*>, bool, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x15c777e)
#107 0x00007fe22644bc09 clang::Sema::PerformMoveOrCopyInitialization(clang::InitializedEntity const&, clang::Sema::NamedReturnInfo const&, clang::Expr*, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1724c09)
#108 0x00007fe22644daca clang::Sema::BuildReturnStmt(clang::SourceLocation, clang::Expr*, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1726aca)
#109 0x00007fe22644d14e clang::Sema::ActOnReturnStmt(clang::SourceLocation, clang::Expr*, clang::Scope*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x172614e)
#110 0x00007fe22583f5eb clang::Parser::ParseReturnStatement() (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb185eb)
#111 0x00007fe2258393fd clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb123fd)
#112 0x00007fe2258387df clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb117df)
#113 0x00007fe2258414a0 clang::Parser::ParseCompoundStatementBody(bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb1a4a0)
#114 0x00007fe2258397e8 clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb127e8)
#115 0x00007fe2258387df clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb117df)
#116 0x00007fe22583c31f clang::Parser::ParseIfStatement(clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb1531f)
#117 0x00007fe225839a09 clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb12a09)
#118 0x00007fe2258387df clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb117df)
#119 0x00007fe22583c31f clang::Parser::ParseIfStatement(clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb1531f)
#120 0x00007fe225839a09 clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb12a09)
#121 0x00007fe2258387df clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb117df)
#122 0x00007fe22583ee37 clang::Parser::ParseForStatement(clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb17e37)
#123 0x00007fe2258399c5 clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb129c5)
#124 0x00007fe2258387df clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb117df)
#125 0x00007fe2258414a0 clang::Parser::ParseCompoundStatementBody(bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb1a4a0)
#126 0x00007fe2258424d5 clang::Parser::ParseFunctionStatementBody(clang::Decl*, clang::Parser::ParseScope&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb1b4d5)
#127 0x00007fe22585cb65 clang::Parser::ParseFunctionDefinition(clang::ParsingDeclarator&, clang::Parser::ParsedTemplateInfo const&, clang::Parser::LateParsedAttrList*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb35b65)
#128 0x00007fe2257b19c8 clang::Parser::ParseDeclGroup(clang::ParsingDeclSpec&, clang::DeclaratorContext, clang::ParsedAttributes&, clang::SourceLocation*, clang::Parser::ForRangeInit*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa8a9c8)
#129 0x00007fe22585b85a clang::Parser::ParseDeclOrFunctionDefInternal(clang::ParsedAttributes&, clang::ParsingDeclSpec&, clang::AccessSpecifier) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb3485a)
#130 0x00007fe22585b2b6 clang::Parser::ParseDeclarationOrFunctionDefinition(clang::ParsedAttributes&, clang::ParsingDeclSpec*, clang::AccessSpecifier) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb342b6)
#131 0x00007fe22585a5ea clang::Parser::ParseExternalDeclaration(clang::ParsedAttributes&, clang::ParsingDeclSpec*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb335ea)
#132 0x00007fe2257c5f72 clang::Parser::ParseInnerNamespace(llvm::SmallVector<clang::Parser::InnerNamespaceInfo, 4u> const&, unsigned int, clang::SourceLocation&, clang::ParsedAttributes&, clang::BalancedDelimiterTracker&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa9ef72)
#133 0x00007fe2257c6039 clang::Parser::ParseInnerNamespace(llvm::SmallVector<clang::Parser::InnerNamespaceInfo, 4u> const&, unsigned int, clang::SourceLocation&, clang::ParsedAttributes&, clang::BalancedDelimiterTracker&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa9f039)
#134 0x00007fe2257c6039 clang::Parser::ParseInnerNamespace(llvm::SmallVector<clang::Parser::InnerNamespaceInfo, 4u> const&, unsigned int, clang::SourceLocation&, clang::ParsedAttributes&, clang::BalancedDelimiterTracker&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa9f039)
#135 0x00007fe2257c58b2 clang::Parser::ParseNamespace(clang::DeclaratorContext, clang::SourceLocation&, clang::SourceLocation) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa9e8b2)
#136 0x00007fe2257ab166 clang::Parser::ParseDeclaration(clang::DeclaratorContext, clang::SourceLocation&, clang::ParsedAttributes&, clang::ParsedAttributes&, clang::SourceLocation*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa84166)
#137 0x00007fe225859efb clang::Parser::ParseExternalDeclaration(clang::ParsedAttributes&, clang::ParsingDeclSpec*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb32efb)
#138 0x00007fe2258588b2 clang::Parser::ParseTopLevelDecl(clang::OpaquePtr<clang::DeclGroupRef>&, clang::Sema::ModuleImportState&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xb318b2)
#139 0x00007fe225797bbe clang::ParseAST(clang::Sema&, bool, bool) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0xa70bbe)
#140 0x00007fe2269840df clang::CodeGenAction::ExecuteAction() (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x1c5d0df)
#141 0x00007fe2273ac297 clang::FrontendAction::Execute() (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x2685297)
#142 0x00007fe227321136 clang::CompilerInstance::ExecuteAction(clang::FrontendAction&) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x25fa136)
#143 0x00007fe227429a0a clang::ExecuteCompilerInvocation(clang::CompilerInstance*) (/usr/lib/llvm-15/bin/../lib/libclang-cpp.so.15+0x2702a0a)
#144 0x0000561009afaaa6 cc1_main(llvm::ArrayRef<char const*>, char const*, void*) (/usr/lib/llvm-15/bin/clang+0x13aa6)
#145 0x0000561009af8cab (/usr/lib/llvm-15/bin/clang+0x11cab)
#146 0x0000561009af8afc clang_main(int, char**) (/usr/lib/llvm-15/bin/clang+0x11afc)
#147 0x00007fe21d88e083 __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x24083)
#148 0x0000561009af54de _start (/usr/lib/llvm-15/bin/clang+0xe4de)
clang: error: unable to execute command: Segmentation fault
clang: error: clang frontend command failed due to signal (use -v to see invocation)
Ubuntu clang version 15.0.0-++20220714052859+bb4d97413582-1~exp1~20220714172957.314
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/lib/llvm-15/bin

Bug Labels:
clang:frontend, crash