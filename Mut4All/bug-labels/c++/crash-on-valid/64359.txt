Issue Title:
LLVM 18 clang parser crashes trying to build Carbon

Source Code & Bug Trace:
Stack dump:
0.      Program arguments: /home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang++ -no-canonical-prefixes -fcolor-diagnostics -Werror -Wall -Wextra -Wthread-safety -Wself-assign -Wimplicit-fallthrough -Wctad-maybe-unsupported -Wnon-virtual-dtor --system-header-prefix=external/ -c -MD -MF bazel-out/k8-fastbuild/bin/explorer/interpreter/_objs/type_checker/type_checker.pic.d -frandom-seed=bazel-out/k8-fastbuild/bin/explorer/interpreter/_objs/type_checker/type_checker.pic.o -std=c++17 -stdlib=libc++ -ffunction-sections -fdata-sections -fPIC -Wno-builtin-macro-redefined -D__DATE__=\"redacted\" -D__TIMESTAMP__=\"redacted\" -D__TIME__=\"redacted\" "-DCLANG_VERSION_FOR_CACHE=\"18.0.0 (https://github.com/llvm/llvm-project.git de7fa3ab9a4ed05e7e4ef05b0919db52383969c5)\"" -DLLVM_ON_UNIX=1 -DHAVE_BACKTRACE=1 -DBACKTRACE_HEADER=<execinfo.h> -DLTDL_SHLIB_EXT=\".so\" -DLLVM_PLUGIN_EXT=\".so\" -DLLVM_ENABLE_THREADS=1 -DHAVE_DEREGISTER_FRAME=1 -DHAVE_LIBPTHREAD=1 -DHAVE_PTHREAD_GETNAME_NP=1 -DHAVE_PTHREAD_H=1 -DHAVE_PTHREAD_SETNAME_NP=1 -DHAVE_REGISTER_FRAME=1 -DHAVE_SETENV_R=1 -DHAVE_STRERROR_R=1 -DHAVE_SYSEXITS_H=1 -DHAVE_UNISTD_H=1 -D_GNU_SOURCE -DHAVE_LINK_H=1 -DHAVE_MALLINFO=1 -DHAVE_SBRK=1 -DHAVE_STRUCT_STAT_ST_MTIM_TV_NSEC=1 -DLLVM_NATIVE_ARCH=\"X86\" -DLLVM_NATIVE_ASMPARSER=LLVMInitializeX86AsmParser -DLLVM_NATIVE_ASMPRINTER=LLVMInitializeX86AsmPrinter -DLLVM_NATIVE_DISASSEMBLER=LLVMInitializeX86Disassembler -DLLVM_NATIVE_TARGET=LLVMInitializeX86Target -DLLVM_NATIVE_TARGETINFO=LLVMInitializeX86TargetInfo -DLLVM_NATIVE_TARGETMC=LLVMInitializeX86TargetMC -DLLVM_NATIVE_TARGETMCA=LLVMInitializeX86TargetMCA -DLLVM_HOST_TRIPLE=\"x86_64-unknown-linux-gnu\" -DLLVM_DEFAULT_TARGET_TRIPLE=\"x86_64-unknown-linux-gnu\" -DLLVM_VERSION_MAJOR=17 -DLLVM_VERSION_MINOR=0 -DLLVM_VERSION_PATCH=0 -DLLVM_VERSION_STRING=\"17.0.0git\" -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -DLLVM_ENABLE_ZLIB=1 -DLLVM_ENABLE_ZSTD=1 -DZSTD_MULTITHREAD -DBLAKE3_USE_NEON=0 -DBAZEL_CURRENT_REPOSITORY=\"\" -iquote . -iquote bazel-out/k8-fastbuild/bin -iquote external/llvm-project -iquote bazel-out/k8-fastbuild/bin/external/llvm-project -iquote external/llvm_zlib -iquote bazel-out/k8-fastbuild/bin/external/llvm_zlib -iquote external/llvm_zstd -iquote bazel-out/k8-fastbuild/bin/external/llvm_zstd -Ibazel-out/k8-fastbuild/bin/external/llvm_zlib/_virtual_includes/zlib -Ibazel-out/k8-fastbuild/bin/external/llvm_zstd/_virtual_includes/zstd -isystem external/llvm-project/llvm/include -isystem bazel-out/k8-fastbuild/bin/external/llvm-project/llvm/include -O1 -gmlt -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer -fno-optimize-sibling-calls -fsanitize=address,undefined,nullability -fsanitize-address-use-after-scope -fno-sanitize-recover=undefined -fsanitize-undefined-strip-path-components=-1 -fno-sanitize=vptr -D_LIBCPP_ENABLE_HARDENED_MODE=1 -march=x86-64-v2 explorer/interpreter/type_checker.cpp -o bazel-out/k8-fastbuild/bin/explorer/interpreter/_objs/type_checker/type_checker.pic.o
1.      explorer/interpreter/type_checker.cpp:2379:5 <Spelling=explorer/interpreter/type_checker.cpp:2380:59>: current parser token ')'
2.      explorer/interpreter/type_checker.cpp:49:1: parsing namespace 'Carbon'
3.      explorer/interpreter/type_checker.cpp:2332:1: parsing struct/union/class body 'Carbon::TypeChecker::SubstituteTransform'
4.      explorer/interpreter/type_checker.cpp:2378:47: parsing function body 'Carbon::TypeChecker::SubstituteTransform::operator()'
5.      explorer/interpreter/type_checker.cpp:2378:47: in compound statement ('{}')
6.      ./explorer/ast/value_transform.h:109:8: instantiating function definition 'Carbon::TransformBase<Carbon::TypeChecker::SubstituteTransform, Carbon::ErrorUnwrapper>::Transform<const Carbon::Bindings *>'
7.      ./explorer/ast/value_transform.h:144:8: instantiating function definition 'Carbon::TransformBase<Carbon::TypeChecker::SubstituteTransform, Carbon::ErrorUnwrapper>::operator()<Carbon::Bindings, nullptr>'
8.      ./explorer/ast/bindings.h:62:8: instantiating function definition 'Carbon::Bindings::Decompose<(lambda at ./explorer/ast/value_transform.h:145:29)>'
9.      ./explorer/ast/value_transform.h:145:29: instantiating function definition 'Carbon::TransformBase<Carbon::TypeChecker::SubstituteTransform, Carbon::ErrorUnwrapper>::operator()(Nonnull<const Bindings *>)::(anonymous class)::operator()<std::map<const Carbon::GenericBinding *, const Carbon::Value *>, std::map<const Carbon::ImplBinding *, const Carbon::Value *>>'
  #0 0x000000000376681b llvm::sys::PrintStackTrace(llvm::raw_ostream&, int) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x376681b)
  #1 0x0000000003763c1b llvm::sys::RunSignalHandlers() (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x3763c1b)
  #2 0x00000000036aba68 CrashRecoverySignalHandler(int) CrashRecoveryContext.cpp:0:0
  #3 0x00007f67bee5fb70 __restore_rt (/lib64/libc.so.6+0x3db70)
  #4 0x00007f67beeb0844 __pthread_kill_implementation (/lib64/libc.so.6+0x8e844)
  #5 0x00007f67bee5fabe gsignal (/lib64/libc.so.6+0x3dabe)
  #6 0x00007f67bee4887f abort (/lib64/libc.so.6+0x2687f)
  #7 0x00007f67bee4879b _nl_load_domain.cold (/lib64/libc.so.6+0x2679b)
  #8 0x00007f67bee58147 (/lib64/libc.so.6+0x36147)
  #9 0x00000000062e0572 (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62e0572)
 #10 0x0000000006741694 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCXXThisExpr(clang::CXXThisExpr*) SemaTemplateInstantiate.cpp:0:0
 #11 0x00000000067881b8 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformMemberExpr(clang::MemberExpr*) SemaTemplateInstantiate.cpp:0:0
 #12 0x0000000006757c8d clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformExprs(clang::Expr* const*, unsigned int, bool, llvm::SmallVectorImpl<clang::Expr*>&, bool*) SemaTemplateInstantiate.cpp:0:0
 #13 0x0000000006760b0b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #14 0x00000000067661c4 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformType(clang::TypeLocBuilder&, clang::TypeLoc) SemaTemplateInstantiate.cpp:0:0
 #15 0x0000000006785235 clang::Sema::SubstFunctionDeclType(clang::TypeSourceInfo*, clang::MultiLevelTemplateArgumentList const&, clang::SourceLocation, clang::DeclarationName, clang::CXXRecordDecl*, clang::Qualifiers, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6785235)
 #16 0x000000000679bc55 clang::TemplateDeclInstantiator::SubstFunctionType(clang::FunctionDecl*, llvm::SmallVectorImpl<clang::ParmVarDecl*>&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x679bc55)
 #17 0x00000000067ecdc0 clang::TemplateDeclInstantiator::VisitCXXMethodDecl(clang::CXXMethodDecl*, clang::TemplateParameterList*, std::optional<clang::ASTTemplateArgumentListInfo const*>, clang::TemplateDeclInstantiator::RewriteKind) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67ecdc0)
 #18 0x00000000067eee84 void llvm::function_ref<void ()>::callback_fn<clang::Sema::SubstDecl(clang::Decl*, clang::DeclContext*, clang::MultiLevelTemplateArgumentList const&)::'lambda'()>(long) SemaTemplateInstantiateDecl.cpp:0:0
 #19 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #20 0x000000000679a270 clang::Sema::SubstDecl(clang::Decl*, clang::DeclContext*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x679a270)
 #21 0x00000000067291f9 clang::Sema::FinishTemplateArgumentDeduction(clang::FunctionTemplateDecl*, llvm::SmallVectorImpl<clang::DeducedTemplateArgument>&, unsigned int, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, llvm::SmallVectorImpl<clang::Sema::OriginalCallArg> const*, bool, llvm::function_ref<bool ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67291f9)
 #22 0x000000000672a64d void llvm::function_ref<void ()>::callback_fn<clang::Sema::DeduceTemplateArguments(clang::FunctionTemplateDecl*, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, bool, bool, llvm::function_ref<bool (llvm::ArrayRef<clang::QualType>)>)::'lambda0'()>(long) SemaTemplateDeduction.cpp:0:0
 #23 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #24 0x000000000673c68c clang::Sema::DeduceTemplateArguments(clang::FunctionTemplateDecl*, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, bool, bool, llvm::function_ref<bool (llvm::ArrayRef<clang::QualType>)>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x673c68c)
 #25 0x00000000065627eb clang::Sema::AddMethodTemplateCandidate(clang::FunctionTemplateDecl*, clang::DeclAccessPair, clang::CXXRecordDecl*, clang::TemplateArgumentListInfo*, clang::QualType, clang::Expr::Classification, llvm::ArrayRef<clang::Expr*>, clang::OverloadCandidateSet&, bool, bool, clang::OverloadCandidateParamOrder) (.constprop.0) SemaOverload.cpp:0:0
 #26 0x0000000006562bdb clang::Sema::AddMethodCandidate(clang::DeclAccessPair, clang::QualType, clang::Expr::Classification, llvm::ArrayRef<clang::Expr*>, clang::OverloadCandidateSet&, bool, clang::OverloadCandidateParamOrder) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6562bdb)
 #27 0x0000000006580e5c clang::Sema::BuildCallToObjectOfClassType(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6580e5c)
 #28 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #29 0x0000000006760b6b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #30 0x00000000067575bc clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformReturnStmt(clang::ReturnStmt*) SemaTemplateInstantiate.cpp:0:0
 #31 0x0000000006790277 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCompoundStmt(clang::CompoundStmt*, bool) SemaTemplateInstantiate.cpp:0:0
 #32 0x0000000006792688 clang::Sema::SubstStmt(clang::Stmt*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6792688)
 #33 0x00000000067e2338 clang::Sema::InstantiateFunctionDefinition(clang::SourceLocation, clang::FunctionDecl*, bool, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67e2338)
 #34 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #35 0x00000000066ee505 clang::Sema::DeduceReturnType(clang::FunctionDecl*, clang::SourceLocation, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x66ee505)
 #36 0x00000000061cc641 clang::Sema::DiagnoseUseOfDecl(clang::NamedDecl*, llvm::ArrayRef<clang::SourceLocation>, clang::ObjCInterfaceDecl const*, bool, bool, clang::ObjCInterfaceDecl*, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x61cc641)
 #37 0x000000000653d277 CreateFunctionRefExpr(clang::Sema&, clang::FunctionDecl*, clang::NamedDecl*, clang::Expr const*, bool, clang::SourceLocation, clang::DeclarationNameLoc const&) SemaOverload.cpp:0:0
 #38 0x00000000065817f4 clang::Sema::BuildCallToObjectOfClassType(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x65817f4)
 #39 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #40 0x0000000006760b6b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #41 0x00000000067575bc clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformReturnStmt(clang::ReturnStmt*) SemaTemplateInstantiate.cpp:0:0
 #42 0x0000000006790277 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCompoundStmt(clang::CompoundStmt*, bool) SemaTemplateInstantiate.cpp:0:0
 #43 0x0000000006792688 clang::Sema::SubstStmt(clang::Stmt*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6792688)
 #44 0x00000000067e2338 clang::Sema::InstantiateFunctionDefinition(clang::SourceLocation, clang::FunctionDecl*, bool, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67e2338)
 #45 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #46 0x00000000066ee505 clang::Sema::DeduceReturnType(clang::FunctionDecl*, clang::SourceLocation, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x66ee505)
 #47 0x00000000061cc641 clang::Sema::DiagnoseUseOfDecl(clang::NamedDecl*, llvm::ArrayRef<clang::SourceLocation>, clang::ObjCInterfaceDecl const*, bool, bool, clang::ObjCInterfaceDecl*, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x61cc641)
 #48 0x0000000006579fd9 clang::Sema::BuildCallToMemberFunction(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6579fd9)
 #49 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #50 0x0000000006760b6b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #51 0x00000000067575bc clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformReturnStmt(clang::ReturnStmt*) SemaTemplateInstantiate.cpp:0:0
 #52 0x0000000006790277 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCompoundStmt(clang::CompoundStmt*, bool) SemaTemplateInstantiate.cpp:0:0
 #53 0x0000000006792688 clang::Sema::SubstStmt(clang::Stmt*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6792688)
 #54 0x00000000067e2338 clang::Sema::InstantiateFunctionDefinition(clang::SourceLocation, clang::FunctionDecl*, bool, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67e2338)
 #55 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #56 0x00000000066ee505 clang::Sema::DeduceReturnType(clang::FunctionDecl*, clang::SourceLocation, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x66ee505)
 #57 0x00000000061cc641 clang::Sema::DiagnoseUseOfDecl(clang::NamedDecl*, llvm::ArrayRef<clang::SourceLocation>, clang::ObjCInterfaceDecl const*, bool, bool, clang::ObjCInterfaceDecl*, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x61cc641)
 #58 0x000000000653d277 CreateFunctionRefExpr(clang::Sema&, clang::FunctionDecl*, clang::NamedDecl*, clang::Expr const*, bool, clang::SourceLocation, clang::DeclarationNameLoc const&) SemaOverload.cpp:0:0
 #59 0x00000000065817f4 clang::Sema::BuildCallToObjectOfClassType(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x65817f4)
 #60 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #61 0x0000000006760b6b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #62 0x0000000006757c8d clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformExprs(clang::Expr* const*, unsigned int, bool, llvm::SmallVectorImpl<clang::Expr*>&, bool*) SemaTemplateInstantiate.cpp:0:0
 #63 0x0000000006760b0b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #64 0x00000000067661c4 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformType(clang::TypeLocBuilder&, clang::TypeLoc) SemaTemplateInstantiate.cpp:0:0
 #65 0x0000000006785235 clang::Sema::SubstFunctionDeclType(clang::TypeSourceInfo*, clang::MultiLevelTemplateArgumentList const&, clang::SourceLocation, clang::DeclarationName, clang::CXXRecordDecl*, clang::Qualifiers, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6785235)
 #66 0x000000000679bc55 clang::TemplateDeclInstantiator::SubstFunctionType(clang::FunctionDecl*, llvm::SmallVectorImpl<clang::ParmVarDecl*>&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x679bc55)
 #67 0x00000000067ecdc0 clang::TemplateDeclInstantiator::VisitCXXMethodDecl(clang::CXXMethodDecl*, clang::TemplateParameterList*, std::optional<clang::ASTTemplateArgumentListInfo const*>, clang::TemplateDeclInstantiator::RewriteKind) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67ecdc0)
 #68 0x00000000067eee84 void llvm::function_ref<void ()>::callback_fn<clang::Sema::SubstDecl(clang::Decl*, clang::DeclContext*, clang::MultiLevelTemplateArgumentList const&)::'lambda'()>(long) SemaTemplateInstantiateDecl.cpp:0:0
 #69 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #70 0x000000000679a270 clang::Sema::SubstDecl(clang::Decl*, clang::DeclContext*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x679a270)
 #71 0x00000000067291f9 clang::Sema::FinishTemplateArgumentDeduction(clang::FunctionTemplateDecl*, llvm::SmallVectorImpl<clang::DeducedTemplateArgument>&, unsigned int, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, llvm::SmallVectorImpl<clang::Sema::OriginalCallArg> const*, bool, llvm::function_ref<bool ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67291f9)
 #72 0x000000000672a64d void llvm::function_ref<void ()>::callback_fn<clang::Sema::DeduceTemplateArguments(clang::FunctionTemplateDecl*, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, bool, bool, llvm::function_ref<bool (llvm::ArrayRef<clang::QualType>)>)::'lambda0'()>(long) SemaTemplateDeduction.cpp:0:0
 #73 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #74 0x000000000673c68c clang::Sema::DeduceTemplateArguments(clang::FunctionTemplateDecl*, clang::TemplateArgumentListInfo*, llvm::ArrayRef<clang::Expr*>, clang::FunctionDecl*&, clang::sema::TemplateDeductionInfo&, bool, bool, llvm::function_ref<bool (llvm::ArrayRef<clang::QualType>)>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x673c68c)
 #75 0x00000000065627eb clang::Sema::AddMethodTemplateCandidate(clang::FunctionTemplateDecl*, clang::DeclAccessPair, clang::CXXRecordDecl*, clang::TemplateArgumentListInfo*, clang::QualType, clang::Expr::Classification, llvm::ArrayRef<clang::Expr*>, clang::OverloadCandidateSet&, bool, bool, clang::OverloadCandidateParamOrder) (.constprop.0) SemaOverload.cpp:0:0
 #76 0x0000000006579e6d clang::Sema::BuildCallToMemberFunction(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6579e6d)
 #77 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #78 0x0000000006760b6b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #79 0x0000000006757c8d clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformExprs(clang::Expr* const*, unsigned int, bool, llvm::SmallVectorImpl<clang::Expr*>&, bool*) SemaTemplateInstantiate.cpp:0:0
 #80 0x0000000006760b0b clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCallExpr(clang::CallExpr*) SemaTemplateInstantiate.cpp:0:0
 #81 0x00000000067575bc clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformReturnStmt(clang::ReturnStmt*) SemaTemplateInstantiate.cpp:0:0
 #82 0x0000000006790277 clang::TreeTransform<(anonymous namespace)::TemplateInstantiator>::TransformCompoundStmt(clang::CompoundStmt*, bool) SemaTemplateInstantiate.cpp:0:0
 #83 0x0000000006792688 clang::Sema::SubstStmt(clang::Stmt*, clang::MultiLevelTemplateArgumentList const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6792688)
 #84 0x00000000067e2338 clang::Sema::InstantiateFunctionDefinition(clang::SourceLocation, clang::FunctionDecl*, bool, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x67e2338)
 #85 0x0000000005e36abf clang::Sema::runWithSufficientStackSpace(clang::SourceLocation, llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5e36abf)
 #86 0x00000000066ee505 clang::Sema::DeduceReturnType(clang::FunctionDecl*, clang::SourceLocation, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x66ee505)
 #87 0x00000000061cc641 clang::Sema::DiagnoseUseOfDecl(clang::NamedDecl*, llvm::ArrayRef<clang::SourceLocation>, clang::ObjCInterfaceDecl const*, bool, bool, clang::ObjCInterfaceDecl*, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x61cc641)
 #88 0x0000000006579fd9 clang::Sema::BuildCallToMemberFunction(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x6579fd9)
 #89 0x00000000062379bd clang::Sema::ActOnCallExpr(clang::Scope*, clang::Expr*, clang::SourceLocation, llvm::MutableArrayRef<clang::Expr*>, clang::SourceLocation, clang::Expr*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x62379bd)
 #90 0x0000000005d61642 clang::Parser::ParsePostfixExpressionSuffix(clang::ActionResult<clang::Expr*, true>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d61642)
 #91 0x0000000005d5a571 clang::Parser::ParseCastExpression(clang::Parser::CastParseKind, bool, bool&, clang::Parser::TypeCastState, bool, bool*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5a571)
 #92 0x0000000005d5d879 clang::Parser::ParseCastExpression(clang::Parser::CastParseKind, bool, clang::Parser::TypeCastState, bool, bool*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5d879)
 #93 0x0000000005d5da38 clang::Parser::ParseAssignmentExpression(clang::Parser::TypeCastState) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5da38)
 #94 0x0000000005d613b9 clang::Parser::ParseExpression(clang::Parser::TypeCastState) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d613b9)
 #95 0x0000000005d6518d clang::Parser::ParseParenExpression(clang::Parser::ParenParseOption&, bool, bool, clang::OpaquePtr<clang::QualType>&, clang::SourceLocation&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d6518d)
 #96 0x0000000005d5ae2b clang::Parser::ParseCastExpression(clang::Parser::CastParseKind, bool, bool&, clang::Parser::TypeCastState, bool, bool*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5ae2b)
 #97 0x0000000005d5d879 clang::Parser::ParseCastExpression(clang::Parser::CastParseKind, bool, clang::Parser::TypeCastState, bool, bool*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5d879)
 #98 0x0000000005d5da38 clang::Parser::ParseAssignmentExpression(clang::Parser::TypeCastState) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d5da38)
 #99 0x0000000005d1bdde clang::Parser::ParseDeclarationAfterDeclaratorAndAttributes(clang::Declarator&, clang::Parser::ParsedTemplateInfo const&, clang::Parser::ForRangeInit*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d1bdde)
#100 0x0000000005d2f365 clang::Parser::ParseDeclGroup(clang::ParsingDeclSpec&, clang::DeclaratorContext, clang::ParsedAttributes&, clang::SourceLocation*, clang::Parser::ForRangeInit*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d2f365)
#101 0x0000000005d31b54 clang::Parser::ParseSimpleDeclaration(clang::DeclaratorContext, clang::SourceLocation&, clang::ParsedAttributes&, clang::ParsedAttributes&, bool, clang::Parser::ForRangeInit*, clang::SourceLocation*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d31b54)
#102 0x0000000005d31f33 clang::Parser::ParseDeclaration(clang::DeclaratorContext, clang::SourceLocation&, clang::ParsedAttributes&, clang::ParsedAttributes&, clang::SourceLocation*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d31f33)
#103 0x0000000005dcf370 clang::Parser::ParseStatementOrDeclarationAfterAttributes(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*, clang::ParsedAttributes&, clang::ParsedAttributes&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5dcf370)
#104 0x0000000005dcfc0a clang::Parser::ParseStatementOrDeclaration(llvm::SmallVector<clang::Stmt*, 32u>&, clang::Parser::ParsedStmtContext, clang::SourceLocation*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5dcfc0a)
#105 0x0000000005dd0aab clang::Parser::ParseCompoundStatementBody(bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5dd0aab)
#106 0x0000000005dd1275 clang::Parser::ParseFunctionStatementBody(clang::Decl*, clang::Parser::ParseScope&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5dd1275)
#107 0x0000000005d04467 clang::Parser::ParseLexedMethodDef(clang::Parser::LexedMethod&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d04467)
#108 0x0000000005d0410d clang::Parser::ParseLexedMethodDefs(clang::Parser::ParsingClass&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d0410d)
#109 0x0000000005d51a8a clang::Parser::ParseCXXMemberSpecification(clang::SourceLocation, clang::SourceLocation, clang::ParsedAttributes&, unsigned int, clang::Decl*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d51a8a)
#110 0x0000000005d53b12 clang::Parser::ParseClassSpecifier(clang::tok::TokenKind, clang::SourceLocation, clang::DeclSpec&, clang::Parser::ParsedTemplateInfo const&, clang::AccessSpecifier, bool, clang::Parser::DeclSpecContext, clang::ParsedAttributes&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d53b12)
#111 0x0000000005d2095f clang::Parser::ParseDeclarationSpecifiers(clang::DeclSpec&, clang::Parser::ParsedTemplateInfo const&, clang::AccessSpecifier, clang::Parser::DeclSpecContext, clang::Parser::LateParsedAttrList*, clang::ImplicitTypenameContext) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d2095f)
#112 0x0000000005cf8ee5 clang::Parser::ParseDeclOrFunctionDefInternal(clang::ParsedAttributes&, clang::ParsedAttributes&, clang::ParsingDeclSpec&, clang::AccessSpecifier) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5cf8ee5)
#113 0x0000000005cf97c9 clang::Parser::ParseDeclarationOrFunctionDefinition(clang::ParsedAttributes&, clang::ParsedAttributes&, clang::ParsingDeclSpec*, clang::AccessSpecifier) (.part.0) Parser.cpp:0:0
#114 0x0000000005d01744 clang::Parser::ParseExternalDeclaration(clang::ParsedAttributes&, clang::ParsedAttributes&, clang::ParsingDeclSpec*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d01744)
#115 0x0000000005d48b44 clang::Parser::ParseInnerNamespace(llvm::SmallVector<clang::Parser::InnerNamespaceInfo, 4u> const&, unsigned int, clang::SourceLocation&, clang::ParsedAttributes&, clang::BalancedDelimiterTracker&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d48b44)
#116 0x0000000005d4bfad clang::Parser::ParseNamespace(clang::DeclaratorContext, clang::SourceLocation&, clang::SourceLocation) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d4bfad)
#117 0x0000000005d32236 clang::Parser::ParseDeclaration(clang::DeclaratorContext, clang::SourceLocation&, clang::ParsedAttributes&, clang::ParsedAttributes&, clang::SourceLocation*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d32236)
#118 0x0000000005d010e8 clang::Parser::ParseExternalDeclaration(clang::ParsedAttributes&, clang::ParsedAttributes&, clang::ParsingDeclSpec*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d010e8)
#119 0x0000000005d0207a clang::Parser::ParseTopLevelDecl(clang::OpaquePtr<clang::DeclGroupRef>&, clang::Sema::ModuleImportState&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5d0207a)
#120 0x0000000005cf20aa clang::ParseAST(clang::Sema&, bool, bool) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x5cf20aa)
#121 0x0000000004221c99 clang::FrontendAction::Execute() (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x4221c99)
#122 0x00000000041a9a36 clang::CompilerInstance::ExecuteAction(clang::FrontendAction&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x41a9a36)
#123 0x00000000042f3691 clang::ExecuteCompilerInvocation(clang::CompilerInstance*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x42f3691)
#124 0x0000000000b793e8 cc1_main(llvm::ArrayRef<char const*>, char const*, void*) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0xb793e8)
#125 0x0000000000b71e7f ExecuteCC1Tool(llvm::SmallVectorImpl<char const*>&, llvm::ToolContext const&) driver.cpp:0:0
#126 0x0000000003fd9819 void llvm::function_ref<void ()>::callback_fn<clang::driver::CC1Command::Execute(llvm::ArrayRef<std::optional<llvm::StringRef>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>*, bool*) const::'lambda'()>(long) Job.cpp:0:0
#127 0x00000000036abec2 llvm::CrashRecoveryContext::RunSafely(llvm::function_ref<void ()>) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x36abec2)
#128 0x0000000003fdaf18 clang::driver::CC1Command::Execute(llvm::ArrayRef<std::optional<llvm::StringRef>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>*, bool*) const (.part.0) Job.cpp:0:0
#129 0x0000000003f9f6f5 clang::driver::Compilation::ExecuteCommand(clang::driver::Command const&, clang::driver::Command const*&, bool) const (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x3f9f6f5)
#130 0x0000000003fa01ed clang::driver::Compilation::ExecuteJobs(clang::driver::JobList const&, llvm::SmallVectorImpl<std::pair<int, clang::driver::Command const*>>&, bool) const (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x3fa01ed)
#131 0x0000000003fabd14 clang::driver::Driver::ExecuteCompilation(clang::driver::Compilation&, llvm::SmallVectorImpl<std::pair<int, clang::driver::Command const*>>&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0x3fabd14)
#132 0x0000000000b777f1 clang_main(int, char**, llvm::ToolContext const&) (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0xb777f1)
#133 0x0000000000a4cc21 main (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0xa4cc21)
#134 0x00007f67bee49b4a __libc_start_call_main (/lib64/libc.so.6+0x27b4a)
#135 0x00007f67bee49c0b __libc_start_main@GLIBC_2.2.5 (/lib64/libc.so.6+0x27c0b)
#136 0x0000000000b70bb5 _start (/home/samiurkhan/out/compilers-llvm-2023-08-02/bin/clang+++0xb70bb5)
clang++: error: clang frontend command failed with exit code 134 (use -v to see invocation)
clang version 18.0.0 (https://github.com/llvm/llvm-project.git de7fa3ab9a4ed05e7e4ef05b0919db52383969c5)
Target: x86_64-unknown-linux-gnu
Thread model: posix
InstalledDir: /home/samiurkhan/out/compilers-llvm-2023-08-02/bin


cmake -B $LLVM_BUILD_DIR -G Ninja -S llvm \
        -DCMAKE_BUILD_TYPE=Release -DLLVM_ENABLE_ASSERTIONS=On -DLLVM_CCACHE_BUILD=On \
        -DLLVM_ENABLE_PROJECTS="clang;lld;clang-tools-extra;compiler-rt;bolt;polly" \
        -DLLVM_ENABLE_RUNTIMES="all" -DLLVM_INSTALL_UTILS=On \
        -DCMAKE_INSTALL_PREFIX=$HOME/out/compilers-llvm-2023-08-02
cmake --build $LLVM_BUILD_DIR --target install


Bug Labels:
c++17, clang:frontend, crash-on-valid