Issue Title:
ICE when passing self as the value to a nonexistent struct field · Issue #5439 · rust-lang/rust · GitHub

Rust Code:
struct Foo {
    foo: int,
}

struct Bar {
    bar: int,
}

impl Bar {
    fn make_foo (&self, i: int) -> ~Foo {
        return ~Foo { nonexistent: self, foo: i };
    }
}

fn main () {
    let bar = Bar { bar: 1 };
    let foo = bar.make_foo(2);
    io::println(fmt!("%d", foo.foo));
}

Bug Labels:
A-type-system, E-easy, E-needs-test, I-ICE
