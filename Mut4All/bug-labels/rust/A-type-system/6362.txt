Issue Title:
ICE when using an enum as a member of a struct when the enum has a variant that is a struct, if the struct definition appears before the enum definition · Issue #6362 · rust-lang/rust · GitHub

Rust Code:
struct Exe {
    action: Action,
}

enum Action {
    Check { code: bool },
}

fn main () {}

Bug Labels:
A-type-system, I-ICE
