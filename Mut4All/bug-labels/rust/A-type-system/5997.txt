Issue Title:
Using enclosing function's type parameter in enum definition yields ICE instead of error · Issue #5997 · rust-lang/rust · GitHub

Rust Code:
fn f<T>() { enum E { V(T) } }
pub fn main() { f::<int>(); }

Bug Labels:
A-type-system, E-needs-test, I-ICE
