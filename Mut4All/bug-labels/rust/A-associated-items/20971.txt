Issue Title:
ICE 'type' was a a subtype of 'type' but now it is not · Issue #20971 · rust-lang/rust · GitHub

Rust Code:
pub trait Parser {
    type Input;
    fn parse(&mut self, input: <Self as Parser>::Input);
}
impl Parser for () {
    type Input = ();
    fn parse(&mut self, input: ()) {

    }
}
pub fn many() -> Box<Parser<Input=<() as Parser>::Input> + 'static> {
    panic!()
}

fn main() {
    many()
        .parse(());
}

Bug Labels:
A-associated-items, E-needs-test, I-ICE
