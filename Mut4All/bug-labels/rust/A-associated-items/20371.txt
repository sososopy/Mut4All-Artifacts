Issue Title:
"No def'n found for DefId" ICE for impl appearing before trait declaration that includes an associated type · Issue #20371 · rust-lang/rust · GitHub

Rust Code:
#![feature(associated_types)]
impl X for f64 { type Y = int; }
trait X {type Y; }
//impl X for f64 { type Y = int; }
fn main() {}

Bug Labels:
A-associated-items, I-ICE
