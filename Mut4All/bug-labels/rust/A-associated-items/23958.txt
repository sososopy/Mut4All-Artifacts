Issue Title:
ICE fictitious type in sizing_type_of() · Issue #23958 · rust-lang/rust · GitHub

Rust Code:
trait MyIntoIterator {
  type IntoIter: Iterator;
  fn into_iter(self) -> Self::IntoIter;
}

trait Iterable where for<'a> &'a Self: MyIntoIterator {
  fn iter<'a>(&'a self) -> <&'a Self as MyIntoIterator>::IntoIter {
    self.into_iter()
  }
}
impl<T> Iterable for T where for<'a> &'a T: MyIntoIterator {}

impl<'a, T> MyIntoIterator for &'a Vec<T> {
  type IntoIter = ::std::slice::Iter<'a, T>;
  fn into_iter(self) -> <Self as MyIntoIterator>::IntoIter { self.iter() }
}

impl<'a> MyIntoIterator for &'a String {
  type IntoIter = ::std::str::Chars<'a>;
  fn into_iter(self) -> <Self as MyIntoIterator>::IntoIter { self.chars() }
}

fn iterate<T>(thing: T) where T: Iterable, for<'a> &'a T: MyIntoIterator {
  for x in thing.iter() {
    println!("a thing");
  }
}

fn main() {
  iterate(vec![1,2,3]);
  iterate("abc".to_string());
}

Bug Labels:
A-associated-items, I-ICE
