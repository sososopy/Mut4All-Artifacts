Issue Title:
regression when relating two opaque types in canonical queries · Issue #116877 · rust-lang/rust · GitHub

Rust Code:
// revisions: sized clone

#[cfg(sized)] fn rpit() -> impl Sized {}
#[cfg(clone)] fn rpit() -> impl Clone {}

fn same_output<Out>(_: impl Fn() -> Out, _: impl Fn() -> Out) {}

pub fn foo() -> impl Sized {
    same_output(rpit, foo);
    same_output(foo, rpit);
    rpit()
}

Bug Labels:
A-impl-trait, C-bug, I-ICE, P-critical, T-types, regression-from-stable-to-nightly
