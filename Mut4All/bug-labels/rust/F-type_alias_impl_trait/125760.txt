Issue Title:
ICE: `assertion failed: !value.has_infer()` in `rustc_hir_typeck/src/writeback.rs` · Issue #125760 · rust-lang/rust · GitHub

Rust Code:
#![feature(type_alias_impl_trait)]
type Bar = impl std::fmt::Display;

async fn test<const N: crate::Bar>() {}

fn main () {}

Command:
rustc --edition=2018

Bug Trace:
//@ check-pass

#![feature(type_alias_impl_trait)]
#![allow(dead_code)]

// test that the type alias impl trait defining use is in a submodule

fn main() {}

type Foo = impl std::fmt::Display;
type Bar = impl std::fmt::Display;

mod foo {
    pub(crate) fn foo() -> super::Foo {
        "foo"
    }

    pub(crate) mod bar {
        pub(crate) fn bar() -> crate::Bar {
            1
        }
    }
}


//@ check-pass

trait Database: for<'r> HasValueRef<'r, Database = Self> {}

trait HasValueRef<'r> {
    type Database: Database;
}

struct Any;

impl Database for Any {}

impl<'r> HasValueRef<'r> for Any {
    // Make sure we don't have issues when the GAT assumption
    // `<Any as HasValue<'r>>::Database = Any` isn't universally
    // parameterized over `'r`.
    type Database = Any;
}

fn main() {}


async fn main() {
    // Adding an .await here avoids the ICE
    test()?;
}

// Removing the const generic parameter here avoids the ICE
async fn test<const N: crate::Bar>() {
}

Bug Labels:
C-bug, F-type_alias_impl_trait, I-ICE, T-compiler
