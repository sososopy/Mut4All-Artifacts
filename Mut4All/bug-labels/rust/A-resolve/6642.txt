Issue Title:
internal compiler error: self wasn't mapped to a def?! · Issue #6642 · rust-lang/rust · GitHub

Rust Code:
struct A;
impl A {
  fn m(&self) {
    fn x() {
      self.m()
    }
  }
}

Bug Labels:
A-resolve, I-ICE
