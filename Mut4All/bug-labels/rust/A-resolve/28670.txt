Issue Title:
internal compiler error with a unknown value in a slice · Issue #28670 · rust-lang/rust · GitHub

Rust Code:
#[repr(C)]
#[derive(Copy, Clone)]
pub enum Ipc {
  CREAT = 0o0001000, // POSIX
  NOWAIT = 2048, // POSIX
}

pub struct MsgBuf {
  pub mtype: u32,
  pub mtext: [u8; Ipc::MSG_BUFF as usize], // <- The error is Ipc::MSG_BUFF, this variable not exist.
}

fn main() {
}

Bug Labels:
A-resolve, I-ICE
