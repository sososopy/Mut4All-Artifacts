Issue Title:
Interaction with uniform_paths canaries can hide import errors and lead to strange ICEs. · Issue #54253 · rust-lang/rust · GitHub

Rust Code:
use std;
mod foo {
    use crate::version; 
    fn bar() {
        version();
    }
}

fn main() {}

Bug Labels:
A-resolve, I-ICE
