Issue Title:
Compiler panic on self-referencing trait with associated types · Issue #23595 · rust-lang/rust · GitHub

Rust Code:
use std::ops::{Index};

trait Hierarchy {
    type Value;
    type ChildKey;
    type Children = Index<Self::ChildKey, Output=Hierarchy>;

    fn data(&self) -> Option<(Self::Value, Self::Children)>;
}

Bug Labels:
A-trait-system, E-needs-test, I-ICE
