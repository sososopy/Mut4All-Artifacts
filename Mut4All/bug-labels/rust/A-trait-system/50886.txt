Issue Title:
rustc::traits::trans OutputTypeParameterMismatch ICE with higher-rank trait bounds and associated type · Issue #50886 · rust-lang/rust · GitHub

Rust Code:
pub struct Struct {}

pub trait Trait<'a> {
    type Assoc;

    fn method() -> Self::Assoc;
}

impl<'a> Trait<'a> for Struct {
    type Assoc = ();

    fn method() -> Self::Assoc {}
}

pub fn function<F, T>(f: F)
where
    F: for<'a> FnOnce(<T as Trait<'a>>::Assoc),
    T: for<'b> Trait<'b>,
{
    f(T::method());
}

fn main() {
    function::<_, Struct>(|_| {});
}

Bug Labels:
A-trait-system, C-bug, I-ICE
