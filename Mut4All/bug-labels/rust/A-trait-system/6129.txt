Issue Title:
The `Self` type is not monomorphized correctly  · Issue #6129 · rust-lang/rust · GitHub

Rust Code:

#[allow(default_methods)];

fn boop<'a, T>(x: &'a T) -> &'a T { x }

trait Foo {
    fn f(&self) {
        io::println("Hello!");
        boop(self).g();
    }
    fn g(&self);
}

struct A {
    x: int
}

impl Foo for A {
    fn g(&self) {
        io::println("Goodbye!");
    }
}

pub fn main() {
    let a = A { x: 1 };
    a.f();
}

Bug Labels:
A-trait-system, I-ICE
