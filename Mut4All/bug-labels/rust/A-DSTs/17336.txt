Issue Title:
ICE: unexpected failure path, comparing in librustc/middle/trans/datum.rs · Issue #17336 · rust-lang/rust · GitHub

Rust Code:
#[allow(dead_code)]
fn check(a: &str) {
    let x = a as *const str;
    x == x;
}

fn main() {
}

Bug Labels:
A-DSTs, I-ICE
