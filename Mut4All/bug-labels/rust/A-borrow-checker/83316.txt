Issue Title:
borrow checker ICE · Issue #83316 · rust-lang/rust · GitHub

Rust Code:
fn listen(&mut self) {
        let run = |nframe: NFrame| -> Result<NFrame> {
            Self::check_kps(&nframe)?;
            self.nframe = nframe;
            self.nframe.generate_bow_set_diridx(&self.sg.bow_vocab);
            self.do_reloc()?;
            Ok(self.nframe.clone()) // todo: can avoid this clone
        };
        loop {
            let nframe = unwrap_or_continue!(self.channels.as_ref().unwrap().1.recv_timeout(Duration::new(1, 0)).ok());
            let result = run(nframe);
            self.channels.as_ref().unwrap().0.send(result.unwrap());
        }
    }

Bug Labels:
A-borrow-checker, C-bug, E-needs-mcve, I-ICE, T-compiler
