Issue Title:
1.27 Internal compiler error while passing a not-variable-bind generator into a macro: · Issue #50878 · rust-lang/rust · GitHub

Rust Code:
#![feature(generators, generator_trait)]

use std::ops::{GeneratorState, Generator};

macro_rules! yield_from {
    ($generator:expr) => {
        unsafe {
            loop {
                match $generator.resume() {
                    GeneratorState::Yielded(y) => yield y,
                    GeneratorState::Complete(ret) => break ret,
                }
            }
        }
    };
}


fn main() {
    || {
        yield_from!(|| {
            yield;
        });
        return;
    };
}

Bug Labels:
A-MIR, A-coroutines, C-bug, I-ICE, T-compiler
