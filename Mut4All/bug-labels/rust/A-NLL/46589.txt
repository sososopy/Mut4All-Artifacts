Issue Title:
MIR borrowck doesn't accept the example of iterating and updating a mutable reference · Issue #46589 · rust-lang/rust · GitHub

Rust Code:
struct List<T> {
    value: T,
    next: Option<Box<List<T>>>,
}

fn to_refs<T>(mut list: &mut List<T>) -> Vec<&mut T> {
    let mut result = vec![];
    loop {
        result.push(&mut list.value);
        if let Some(n) = list.next.as_mut() {
            list = n;
        } else {
            return result;
        }
    }
}

fn main() {
}

Bug Labels:
A-MIR, A-NLL, A-diagnostics, C-bug, I-ICE, NLL-complete, P-medium, T-compiler
