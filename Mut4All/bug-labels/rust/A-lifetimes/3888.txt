Issue Title:
region error "Cannot encode region variables" · Issue #3888 · rust-lang/rust · GitHub

Rust Code:
extern mod std;
fn vec_peek<T>(v: &r/[T]) -> Option< (&r/T, &r/[T]) > {
    if v.len() == 0 {
        None
    } else {
        let head = &v[0];
        let tail = v.view(1, v.len());
        Some( (head, tail) )
    }
}


mod tests {
    #[test]
    fn test_peek_empty_stack() {
        let v : &[int] = &[];
        assert (None == vec_peek(v));
    }

    #[test]
    fn test_peek_empty_unique() {
        let v : ~[int] = ~[];
        assert (None == vec_peek(v));
    }

    #[test]
    fn test_peek_empty_managed() {
        let v : @[int] = @[];
        assert (None == vec_peek(v));
    }

    /*
    #[test]
    fn test_peek_full_stack() {
        let v: &[int] = &[1, 2, 3];
        let head: &int = &v[0];
        let tail: &[int] = v.view(1, v.len());

        match

        assert (None == vec_peek(v));
    }
    */
}

Bug Labels:
A-lifetimes, I-ICE
