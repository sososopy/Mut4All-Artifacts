Issue Title:
Two test cases for incorrect region inference · Issue #4036 · rust-lang/rust · GitHub

Rust Code:
pub trait Deserializable<D> {
    static fn deserialize(&self, d: &D) -> self;
}

pub impl<D> int: Deserializable<D> {
    static fn deserialize(&self, _d: &D) -> int { fail }
}

struct JsonDeserializer {
    stack: &int,
}

impl JsonDeserializer {
}

trait Unflattenator<T> {
    fn unflatten(&self) -> T;
}

struct DeserializingUnflattenator<D, T: Deserializable<D>> {
    bogus: ()
}

fn from_reader<D>() -> D { fail }

fn unflatten<D, T: Deserializable<D>>(_s: &DeserializingUnflattenator<D, T>) -> T {
    let deser: &D = &from_reader();
    deserialize(deser)
}

fn m(_t: &r/int) {
    let unflat: DeserializingUnflattenator<JsonDeserializer, int> = DeserializingUnflattenator { bogus: () };
    unflatten(&unflat);
}

fn main() {
}

Bug Labels:
A-lifetimes, I-ICE
