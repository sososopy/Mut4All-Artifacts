Issue Title:
Const generics in enum discriminants cause an ICE · Issue #96594 · rust-lang/rust · GitHub

Rust Code:
#![allow(incomplete_features)]
#![feature(generic_const_exprs)]
#![crate_type = "lib"]

#[repr(u8)]
pub enum SomeByte<const VALUE: u8>
where
    [(); VALUE as usize]:,
{
    Value = VALUE,
}

Bug Trace:
stack backtrace:
   0:     0x7ff8bd75981f - <std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display>::fmt::h4a62c20f41e76f07
   1:     0x7ff8bd789cca - core::fmt::write::h2fe5255b2dcdf64c
   2:     0x7ff8bd74bf49 - <std::io::IoSliceMut as core::fmt::Debug>::fmt::h3e9a3ad364f2e8ca
   3:     0x7ff8bd75d00b - std::panicking::default_hook::hb0d70aac79902e97
   4:     0x7ff8bd75cbfe - std::panicking::default_hook::hb0d70aac79902e97
   5:     0x7ff8651a83a6 - <rustc_middle[588a68ee0d484b7b]::ty::SymbolName as core[85b4b3ec3e1a751c]::fmt::Debug>::fmt
   6:     0x7ff8bd75d8ea - std::panicking::rust_panic_with_hook::h60185f0484cf873e
   7:     0x7ff869b27775 - <<rustc_errors[b425947c3c3f882f]::json::Diagnostic>::from_errors_diagnostic::BufWriter as std[6ed58db4c3aec449]::io::Write>::flush
   8:     0x7ff869b25529 - <<rustc_errors[b425947c3c3f882f]::json::Diagnostic>::from_errors_diagnostic::BufWriter as std[6ed58db4c3aec449]::io::Write>::flush
   9:     0x7ff869e44959 - rustc_query_system[43367c53c341809a]::query::plumbing::incremental_verify_ich_cold
  10:     0x7ff869ae60d9 - <rustc_errors[b425947c3c3f882f]::diagnostic_builder::DiagnosticBuilderInner as core[85b4b3ec3e1a751c]::ops::drop::Drop>::drop
  11:     0x7ff869aea32f - <rustc_errors[b425947c3c3f882f]::HandlerInner as core[85b4b3ec3e1a751c]::ops::drop::Drop>::drop
  12:     0x7ff8651c8394 - rustc_driver[cc87a4417a6f2302]::pretty::print_after_hir_lowering
  13:     0x7ff8651d1f8a - rustc_driver[cc87a4417a6f2302]::pretty::print_after_hir_lowering
  14:     0x7ff8651be58d - rustc_driver[cc87a4417a6f2302]::pretty::print_after_hir_lowering
  15:     0x7ff8651bb6e9 - rustc_driver[cc87a4417a6f2302]::pretty::print_after_hir_lowering
  16:     0x7ff86513d876 - <rustc_privacy[78545dac10f98ba9]::ObsoleteVisiblePrivateTypesVisitor as rustc_hir[3f096969c6f05e8d]::intravisit::Visitor>::visit_expr
  17:     0x7ff86516bb16 - <rustc_driver[cc87a4417a6f2302]::args::Error as core[85b4b3ec3e1a751c]::fmt::Debug>::fmt
  18:     0x7ff86516cb48 - <rustc_driver[cc87a4417a6f2302]::args::Error as core[85b4b3ec3e1a751c]::fmt::Debug>::fmt
  19:     0x7ff8bd76ed5c - std::sys::windows::thread::Thread::new::h632959755be76c89
  20:     0x7ff948c154e0 - BaseThreadInitThunk
  21:     0x7ff94a18485b - RtlUserThreadStart

Bug Labels:
C-bug, F-generic_const_exprs, I-ICE, T-compiler, glacier, requires-incomplete-features, requires-nightly
