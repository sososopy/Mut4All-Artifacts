Issue Title:
Error taking array of size N and returning array of size NxN · Issue #111667 · rust-lang/rust · GitHub

Rust Code:
#![feature(generic_const_exprs)]

pub trait CrossProduct<'a, T, R> {
    fn cross(&'a self, t: &'a T) -> R;
}

impl<'a, T, U, const N: usize> CrossProduct<'a, [U; N], [(&'a T, &'a U); N * N]> for [T; N] {
    fn cross(&'a self, us: &'a [U; N]) -> [(&'a T, &'a U); N * N] {
        std::array::from_fn(|i| (&self[i / N], &us[i % N]))
    }
}

Bug Trace:
<backtrace>

Bug Labels:
C-bug, E-needs-test, F-generic_const_exprs, I-ICE, T-compiler
