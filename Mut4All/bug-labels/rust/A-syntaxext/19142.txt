Issue Title:
ICE: With `writeln!` after recent changes in std::fmt · Issue #19142 · rust-lang/rust · GitHub

Rust Code:
use std::fmt::Show;
use std::io::PipeStream;

struct Program {
    stdin: PipeStream,
}

impl Program {
    fn send<T: Show>(&mut self, line: T) -> &mut Program {
        // OK
        //match writeln!(&mut self.stdin, "{}", line) {
        // ICE
        match writeln!(self.stdin, "{}", line) {
            Err(_) => panic!(),
            Ok(_) => self,
        }
    }
}

fn main() {}

Bug Labels:
A-syntaxext, I-ICE
