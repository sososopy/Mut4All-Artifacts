Issue Title:
Panic when matching a Option<&str> and returning a String · Issue #84315 · rust-lang/rust · GitHub

Rust Code:
#![feature(proc_macro_hygiene, decl_macro)]

#[macro_use]
extern crate rocket;

#[get("/")]
fn index() -> String {
    format!("{:?}", routes![index])
}

#[get("/name")]
fn name() -> String {
    let x = &routes![name][0];
    match x.name {
        Some(y) => y.to_string(),
        None => "None".to_string(),
    }
}

fn main() {
    rocket::ignite().mount("/", routes![index, name]).launch();
}

Bug Trace:
query stack during panic:
#0 [predicates_of] computing predicates of `std::convert::From`
#1 [typeck] type-checking `index`
#2 [typeck_item_bodies] type-checking all item bodies
#3 [analysis] running analysis passes on this crate
end of query stack

Bug Labels:
A-incr-comp, C-bug, I-ICE, T-compiler
