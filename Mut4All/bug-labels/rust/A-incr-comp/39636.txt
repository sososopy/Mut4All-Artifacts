Issue Title:
incr. comp.: Attribute errors when compiling crate with serde_derive. · Issue #39636 · rust-lang/rust · GitHub

Rust Code:
extern crate serde;
#[macro_use]
extern crate serde_derive;
extern crate serde_json;

#[derive(Deserialize)]
#[serde(tag = "variant")] // if this attribute is added or removed after an incr comp build it causes an ICE
enum A {
    A1 { x: usize },
}

fn main() {
    // The below line also seems necessary to trigger the ICE
    let a: A = serde_json::from_str("").unwrap();
}

Bug Labels:
A-incr-comp, I-ICE
