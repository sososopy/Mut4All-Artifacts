Issue Title:
ICE: 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:931:9 · Issue #68372 · rust-lang/rust · GitHub

Rust Code:
pub mod client;
pub mod msg;

use std::collections::HashMap;
use std::sync::Arc;
use tokio::sync::broadcast::{channel, Receiver, Sender};

/**
 * A channel is named and typed with the type of messages it should be carrying
 */
struct Channel {
    name: String,
    send: Sender<Message>,
    recv: Receiver<Message>,
}

struct Message {}

impl Channel {
    fn send(&self, msg: Message) {}
    fn recv(&self, msg: Message) {}
}

struct Bus {
    /**
     * Channels are named and can implement a number of different types. This should
     * allow the Bus to handle different channels with different message payloads
     * while still taking advantage of compile-time checks
     */
    channels: HashMap<String, Channel>,
}

#[cfg(test)]
mod tests {
    use super::*;
}

Bug Labels:
A-incr-comp, C-bug, E-needs-mcve, I-ICE, P-high, T-compiler
