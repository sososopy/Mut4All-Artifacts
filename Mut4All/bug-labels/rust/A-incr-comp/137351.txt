Issue Title:
GitHub · Where software is built

Rust Code:
#[test]
#[should_panic = "assertion failed: !(2 + 2 == 4)"]
fn syntax4() {
    let _: bool = never!(2 + 2 == 4);
}

Bug Trace:
✘ techn0@IO  ~/source/rust-analyzer   master ±  RUST_BACKTRACE=full cargo install --path crates/rust-analyzer --profile=release --locked --force --features force-always-assert
  Installing rust-analyzer v0.0.0 (/home/techn0/source/rust-analyzer/crates/rust-analyzer)
    Updating crates.io index
   Compiling hir v0.0.0 (/home/techn0/source/rust-analyzer/crates/hir)

thread 'rustc' panicked at compiler/rustc_serialize/src/opaque.rs:295:9:
MemDecoder exhausted
stack backtrace:
   0:     0x7cd598adc07a - <std::sys::backtrace::BacktraceLock::print::DisplayBacktrace as core::fmt::Display>::fmt::he089f96442833f67
   1:     0x7cd599214d26 - core::fmt::write::h2f210ed4c94745cb
   2:     0x7cd59a10f7d1 - std::io::Write::write_fmt::h7de08171ab770fb2
   3:     0x7cd598adbed2 - std::sys::backtrace::BacktraceLock::print::h810fbd31421329e6
   4:     0x7cd598ade477 - std::panicking::default_hook::{{closure}}::hbaad47ed9dc6356d
   5:     0x7cd598ade260 - std::panicking::default_hook::h24e207139139d40a
   6:     0x7cd597c4e258 - std[cba35227022cdb8c]::panicking::update_hook::<alloc[304106e3416ed1f2]::boxed::Box<rustc_driver_impl[16f35eaf1f029c02]::install_ice_hook::{closure#1}>>::{closure#0}
   7:     0x7cd598adecc3 - std::panicking::rust_panic_with_hook::ha9131beeb2ddc506
   8:     0x7cd598ade986 - std::panicking::begin_panic_handler::{{closure}}::h1bba0eaeb6da506f
   9:     0x7cd598adc549 - std::sys::backtrace::__rust_end_short_backtrace::h1d1ca3eade483f4c
  10:     0x7cd598ade67d - rust_begin_unwind
  11:     0x7cd5957a1480 - core::panicking::panic_fmt::h896a0727a1a943f9
  12:     0x7cd598733057 - <rustc_serialize[a880abae7a0cb542]::opaque::MemDecoder>::decoder_exhausted
  13:     0x7cd59a1f0d1b - rustc_incremental[eeaa62103b2f7725]::persist::load::setup_dep_graph
  14:     0x7cd59a16e045 - rustc_interface[d49f06094f81b30c]::interface::run_compiler::<(), rustc_driver_impl[16f35eaf1f029c02]::run_compiler::{closure#0}>::{closure#1}
  15:     0x7cd59a034251 - std[cba35227022cdb8c]::sys::backtrace::__rust_begin_short_backtrace::<rustc_interface[d49f06094f81b30c]::util::run_in_thread_with_globals<rustc_interface[d49f06094f81b30c]::util::run_in_thread_pool_with_globals<rustc_interface[d49f06094f81b30c]::interface::run_compiler<(), rustc_driver_impl[16f35eaf1f029c02]::run_compiler::{closure#0}>::{closure#1}, ()>::{closure#0}, ()>::{closure#0}::{closure#0}, ()>
  16:     0x7cd59a034708 - <<std[cba35227022cdb8c]::thread::Builder>::spawn_unchecked_<rustc_interface[d49f06094f81b30c]::util::run_in_thread_with_globals<rustc_interface[d49f06094f81b30c]::util::run_in_thread_pool_with_globals<rustc_interface[d49f06094f81b30c]::interface::run_compiler<(), rustc_driver_impl[16f35eaf1f029c02]::run_compiler::{closure#0}>::{closure#1}, ()>::{closure#0}, ()>::{closure#0}::{closure#0}, ()>::{closure#1} as core[3b140760090fa97d]::ops::function::FnOnce<()>>::call_once::{shim:vtable#0}
  17:     0x7cd59a035caf - std::sys::pal::unix::thread::Thread::new::thread_start::ha07e360225fa3528
  18:     0x7cd594294ac3 - start_thread
                               at ./nptl/pthread_create.c:442:8
  19:     0x7cd594326850 - __GI___clone3
                               at ./misc/../sysdeps/unix/sysv/linux/x86_64/clone3.S:81
  20:                0x0 - <unknown>

error: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md

note: rustc 1.85.0 (4d91de4e4 2025-02-17) running on x86_64-unknown-linux-gnu

note: compiler flags: --crate-type lib -C opt-level=3 -C embed-bitcode=no -C incremental=[REDACTED] -C strip=debuginfo

note: some of the compiler flags provided by cargo are hidden

query stack during panic:
end of query stack
error: could not compile `hir` (lib)

Caused by:
  process didn't exit successfully: `/home/techn0/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/rustc --crate-name hir --edition=2021 crates/hir/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts,future-incompat --diagnostic-width=189 --crate-type lib --emit=dep-info,metadata,link -C opt-level=3 -C embed-bitcode=no '--warn=clippy::suspicious' '--warn=clippy::style' '--allow=clippy::restriction' '--deny=clippy::perf' '--deny=clippy::correctness' '--warn=clippy::complexity' '--allow=clippy::wrong_self_convention' '--allow=clippy::vec_init_then_push' '--allow=clippy::useless_asref' --warn=unused_lifetimes --warn=unused_extern_crates --warn=unsafe_op_in_unsafe_fn --warn=unreachable_pub '--allow=clippy::unnecessary_map_or' '--allow=clippy::type_complexity' '--allow=clippy::too_many_arguments' '--allow=clippy::too_long_first_doc_paragraph' '--warn=clippy::todo' '--warn=clippy::str_to_string' '--allow=clippy::single_match' '--allow=clippy::result_unit_err' '--warn=clippy::rc_buffer' '--warn=clippy::print_stdout' '--warn=clippy::print_stderr' '--allow=clippy::new_ret_no_self' '--allow=clippy::literal_string_with_formatting_args' '--allow=clippy::len_without_is_empty' --warn=explicit_outlives_requirements '--allow=clippy::enum_variant_names' --warn=elided_lifetimes_in_paths '--warn=clippy::dbg_macro' '--allow=clippy::assigning_clones' --check-cfg 'cfg(docsrs,test)' --check-cfg 'cfg(feature, values("in-rust-tree"))' -C metadata=29adb61bf5259a60 -C extra-filename=-273f74d4086de190 --out-dir /home/techn0/source/rust-analyzer/target/release/deps -C incremental=/home/techn0/source/rust-analyzer/target/release/incremental -C strip=debuginfo -L dependency=/home/techn0/source/rust-analyzer/target/release/deps --extern arrayvec=/home/techn0/source/rust-analyzer/target/release/deps/libarrayvec-83c4f6e45016a8e4.rmeta --extern base_db=/home/techn0/source/rust-analyzer/target/release/deps/libbase_db-ea01fa10b1b9b51e.rmeta --extern cfg=/home/techn0/source/rust-analyzer/target/release/deps/libcfg-5d9bec7a1e95b759.rmeta --extern either=/home/techn0/source/rust-analyzer/target/release/deps/libeither-ffdd35ad807f2d79.rmeta --extern hir_def=/home/techn0/source/rust-analyzer/target/release/deps/libhir_def-d588d0854f8a8ddf.rmeta --extern hir_expand=/home/techn0/source/rust-analyzer/target/release/deps/libhir_expand-2ae500db8191678a.rmeta --extern hir_ty=/home/techn0/source/rust-analyzer/target/release/deps/libhir_ty-8694d15cbd6a5213.rmeta --extern indexmap=/home/techn0/source/rust-analyzer/target/release/deps/libindexmap-6a6213ca847bfd7a.rmeta --extern intern=/home/techn0/source/rust-analyzer/target/release/deps/libintern-8e579159b6d655e0.rmeta --extern itertools=/home/techn0/source/rust-analyzer/target/release/deps/libitertools-d59a3d8d6b7867c4.rmeta --extern rustc_hash=/home/techn0/source/rust-analyzer/target/release/deps/librustc_hash-b728c11f1f6c73cb.rmeta --extern smallvec=/home/techn0/source/rust-analyzer/target/release/deps/libsmallvec-a1bcd90d2310b633.rmeta --extern span=/home/techn0/source/rust-analyzer/target/release/deps/libspan-b3a3f4a3995deb0b.rmeta --extern stdx=/home/techn0/source/rust-analyzer/target/release/deps/libstdx-051636fbe1492a7e.rmeta --extern syntax=/home/techn0/source/rust-analyzer/target/release/deps/libsyntax-1ef88f592605b7ca.rmeta --extern tracing=/home/techn0/source/rust-analyzer/target/release/deps/libtracing-e523aebeda50bc4a.rmeta --extern triomphe=/home/techn0/source/rust-analyzer/target/release/deps/libtriomphe-c822401b8e0fa545.rmeta --extern tt=/home/techn0/source/rust-analyzer/target/release/deps/libtt-cce7a4343c1a3d5e.rmeta` (exit status: 101)
error: failed to compile `rust-analyzer v0.0.0 (/home/techn0/source/rust-analyzer/crates/rust-analyzer)`, intermediate artifacts can be found at `/home/techn0/source/rust-analyzer/target`.
To reuse those artifacts with a future compilation, set the environment variable `CARGO_TARGET_DIR` to that path.

Bug Labels:
A-incr-comp, C-bug, I-ICE, T-compiler
