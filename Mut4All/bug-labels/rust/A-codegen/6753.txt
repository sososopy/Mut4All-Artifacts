Issue Title:
Compiler error with float structs and foreign functions · Issue #6753 · rust-lang/rust · GitHub

Rust Code:
#[link(name = "my_lib",
       vers = "0.1")];

#[crate_type = "lib"];

use core::libc::{c_void};

pub extern "C" {
    fn rect_create() -> *rect;
    fn set_point(rect : *rect, pos : Vector2f) -> ();
}

pub struct rect {
    This : *c_void
}

pub struct Vector2f {
    x : f32,
    y : f32
}

pub struct RectWrapped {
    priv rect : *rect
}

impl RectWrapped {
    pub fn new() -> RectWrapped {
        RectWrapped {rect :  unsafe {rect_create()}}
    }
}

Bug Labels:
A-codegen, I-ICE
