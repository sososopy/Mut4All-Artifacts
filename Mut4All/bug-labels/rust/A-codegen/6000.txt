Issue Title:
unique pointers + macros → rust: task failed at 'assertion failed: !bcx.ccx().maps.moves_map.contains(&arg_expr.id)' · Issue #6000 · rust-lang/rust · GitHub

Rust Code:
macro_rules! thing {
    ($e:expr) => { thing!($e, $e) };
    ($e0:expr, $e1:expr) => {{
        let e = $e0;
        assert!(e == $e1);
    }}
}

pub fn main() {
    thing!(~17);
}

Bug Labels:
A-codegen, I-ICE
