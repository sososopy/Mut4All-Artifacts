Issue Title:
"LLVM ERROR: Broken module found, compilation aborted" with closures · Issue #23960 · rust-lang/rust · GitHub

Rust Code:
#![feature(unboxed_closures)]

fn run_double_ended_test<T, TF, F, IF, E>(_: TF, _: F, _: Vec<E>)
    where TF: Fn() -> T,
          F: Fn<T, Output=IF>,
          IF: Iterator<Item=E>,
{}

fn double_ended_split_char2() {
    run_double_ended_test(|| (|| "foo.bar.baz", || '.'),
                          |s, p| (str::split)(s(), p()),
                          vec!["foo", "bar", "baz"]);
}

fn main() { double_ended_split_char2(); }

Bug Labels:
A-codegen, I-ICE
