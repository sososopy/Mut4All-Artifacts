Issue Title:
Compiler panic when attempting to use non immediate as assembly parameter · Issue #54067 · rust-lang/rust · GitHub

Rust Code:
#![feature(asm)]

pub fn boot(addr: Option<u32>) {
    unsafe {
        asm!(
            "mov sp, $0"
             :
             : "r" (addr)
        );
    }
}

Bug Labels:
A-inline-assembly, C-bug, E-needs-test, I-ICE, T-compiler, requires-nightly
