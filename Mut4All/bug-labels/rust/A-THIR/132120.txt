Issue Title:
ICE with const blocks in rustc_legacy_const_generics · Issue #132120 · rust-lang/rust · GitHub

Rust Code:
fn main() {
    const I = 0; // type ommitted
    std::arch::x86_64::_mm_shuffle_ps(todo!(), todo!(), const {I});
}

Bug Trace:
error: missing type for `const` item
 --> src/main.rs:3:12
  |
3 |     const I = 0; // type ommitted
  |            ^ help: provide a type for the constant: `: i32`

warning: unreachable expression
 --> src/main.rs:4:48
  |
4 |     std::arch::x86_64::_mm_shuffle_ps(todo!(), todo!(), const {I});
  |                                       -------  ^^^^^^^ unreachable expression
  |                                       |
  |                                       any code following this expression is unreachable
  |
  = note: `#[warn(unreachable_code)]` on by default
  = note: this warning originates in the macro `todo` (in Nightly builds, run with -Z macro-backtrace for more info)

error: internal compiler error: compiler\rustc_middle\src\ty\typeck_results.rs:334:13: node_type: no type for node HirId(DefId(0:3 ~ main[4b21]::main).9) (const `{I}`)

thread 'rustc' panicked at compiler\rustc_middle\src\ty\typeck_results.rs:334:13:
Box<dyn Any>
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&template=ice.md

note: rustc 1.82.0 (f6e511eec 2024-10-15) running on x86_64-pc-windows-msvc

query stack during panic:
#0 [thir_body] building THIR for `main::{constant#0}`
#1 [check_match] match-checking `main::{constant#0}`
#2 [mir_built] building MIR for `main::{constant#0}`
#3 [mir_const_qualif] const checking `main::{constant#0}`
#4 [mir_promoted] promoting constants in MIR for `main::{constant#0}`
#5 [mir_borrowck] borrow-checking `main::{constant#0}`
#6 [analysis] running analysis passes on this crate
end of query stack
error: aborting due to 2 previous errors; 1 warning emitted

Bug Labels:
A-THIR, A-const-generics, C-bug, I-ICE, S-has-mcve, T-compiler
