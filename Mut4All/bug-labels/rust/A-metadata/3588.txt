Issue Title:
ICE: encode_symbol: id not found · Issue #3588 · rust-lang/rust · GitHub

Rust Code:
trait Reader {
}

trait ReaderUtil {
    fn read_chars(n: uint) -> ~[char];
}

impl<T: Reader> T : ReaderUtil {
    fn read_chars(_n: uint) -> ~[char] {
        // returns the (consumed offset, n_req), appends characters to &chars
        fn chars_from_bytes() -> (uint, uint) {
            (0, 0)
        }
        ~[]
    }
}

Bug Labels:
A-metadata, I-ICE
