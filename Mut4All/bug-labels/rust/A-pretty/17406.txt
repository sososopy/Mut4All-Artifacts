Issue Title:
pretty printer ICEs on large expressions: assertion failed: (self.right != self.left) · Issue #17406 · rust-lang/rust · GitHub

Rust Code:
#![feature(macro_rules)]

macro_rules! gen {
    ($i:expr;) => {};
    ($i:expr; $n0:ident, $($n:ident,)*) => {
        static $n0: int = $i; gen!($i + 1; $($n,)*)
    }
}

gen! { 0;
    I0,
    I1,
    I2,
    // lots of good stuff here
    I199,
}

fn main() {
}

Bug Labels:
A-pretty, I-ICE
