Issue Title:
ICE on some funky moving in/out on nightly ...  · Issue #51020 · rust-lang/rust · GitHub

Rust Code:
extern crate itertools;
use itertools::Itertools;
use std::collections::HashMap;

fn main() {
    let v: Vec<_> = vec![(4, (0, 5)), (5, (6, 7))].into_iter().collect();

    {
        // make sure no port duplicates for some ports
        let dupportsfound = v.iter().sorted_by_key(|v| v.0);

        let dupportsfound = dupportsfound
            .into_iter()
            .group_by(|v| v.0)
            .into_iter()
            .filter(|(_, mut gi)| gi.by_ref().count() > 1)
            .map(|(g, _)| g)
            .collect::<Vec<_>>();

        if dupportsfound.len() > 0 {
            panic!(format!(
                "Duplicate use found for {:?}",
                dupportsfound
            ));
        }
    }

    let v = v
        .into_iter()
        .collect::<HashMap<_, _>>();
        
    println!("{:?}",v);
}

Bug Labels:
C-bug, I-ICE, T-compiler, fixed-by-NLL
