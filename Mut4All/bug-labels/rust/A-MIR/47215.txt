Issue Title:
Compiler crash with #[thread_local] · Issue #47215 · rust-lang/rust · GitHub

Rust Code:
#![feature(thread_local)]

#[thread_local]
static mut X: ::std::sync::atomic::AtomicUsize = ::std::sync::atomic::ATOMIC_USIZE_INIT;

fn main() {
    unsafe {
        let mut x = X;
        let _y = x.get_mut();
    }
}

Bug Labels:
A-MIR, A-borrow-checker, C-bug, I-ICE, P-medium, T-compiler
