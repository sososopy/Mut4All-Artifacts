Issue Title:
Compiler panics on nightly compiling `speculate` tests · Issue #50915 · rust-lang/rust · GitHub

Rust Code:
#![feature(plugin)]
#![cfg_attr(test, plugin(speculate))]

speculate! {
    describe hello {
        it "panics" {
            assert!(true);
        }
    }
}

Bug Labels:
A-macros, C-bug, I-ICE, T-compiler, requires-nightly
