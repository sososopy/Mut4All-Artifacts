Issue Title:
ICE non-eager expansion without a parent scope · Issue #66804 · rust-lang/rust · GitHub

Rust Code:
macro_rules! doc_comment {
    ($x:expr) => {
        #[doc = $x]
        extern {}
    };
}

macro_rules! some_macro {
    ($t1: ty) => {
        doc_comment!{format!("{coor}", coor = stringify!($t1)).as_str()}}
}

fn main() {
    some_macro!(u8);
}

Bug Labels:
A-macros, C-bug, I-ICE, T-compiler
