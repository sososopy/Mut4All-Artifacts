Issue Title:
ICE: unprintable span · Issue #33185 · rust-lang/rust · GitHub

Rust Code:
#[macro_export]
macro_rules! state {
    ( $( $name:ident : $field:ty )* ) => (
        #[derive(Default)]
        struct State {
            $($name : $field),*
        }
    )
}

state! { x: i64 }

pub fn main() {
}

Bug Labels:
A-macros, C-bug, E-needs-test, I-ICE
